apiVersion: v1
kind: ConfigMap
metadata:
  name: vlc-player-sts-config
  namespace: default
  labels:
    app: vlc-player
    phase: statefulset
data:
  # VLC Player Configuration for StatefulSet
  vlc.conf: |
    [main]
    interface=http
    http-host=0.0.0.0
    http-port=8080
    playlist-autostart=1
    loop=1
    sout-keep=1
    
    [http]
    host=0.0.0.0
    port=8080
    
    [streaming]
    enable=1
    output-format=mp4
    
  # Advanced Playlist Configuration
  playlist.m3u: |
    #EXTM3U
    #EXTINF:-1,Big Buck Bunny
    /app/media/BigBuckBunny.mp4
    #EXTINF:-1,Elephants Dream
    /app/media/ElephantsDream.mp4
    #EXTINF:-1,For Bigger Blazes
    /app/media/ForBiggerBlazes.mp4
    #EXTINF:-1,Sintel
    /app/media/Sintel.mp4
    #EXTINF:-1,Tears of Steel
    /app/media/TearsOfSteel.mp4
    
  # Environment Configuration for StatefulSet
  env.conf: |
    VLC_PORT=8080
    PLAYLIST_PATH=/app/media/playlist.m3u
    LOG_LEVEL=1
    AUDIO_OUTPUT=pulse
    VIDEO_OUTPUT=dummy
    CACHE_SIZE=1000
    NETWORK_CACHING=1000
    
  # Resource limits configuration
  resource.conf: |
    # CPU and Memory targets for autoscaling
    CPU_TARGET_UTILIZATION=70
    MEMORY_TARGET_UTILIZATION=80
    MIN_REPLICAS=2
    MAX_REPLICAS=10
    
  # Monitoring configuration
  monitoring.conf: |
    METRICS_ENABLED=true
    METRICS_PORT=9090
    HEALTH_CHECK_INTERVAL=30
    LOG_RETENTION_DAYS=7